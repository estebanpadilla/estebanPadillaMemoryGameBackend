const THEME_FACES = 'faces';
const THEME_FOOD = 'food';
const THEME_ANIMALS = 'animals';
const THEME_FLAGS = 'flags';

const express = require('express');
var cors = require('cors');
const app = express();
const port = 3000;
app.use(cors());

const faceIcons = ['ðŸ˜‚', 'ðŸ˜„', 'ðŸ˜ƒ', 'ðŸ˜€', 'ðŸ˜Š', 'ðŸ˜‰', 'ðŸ˜', 'ðŸ˜˜', 'ðŸ˜š', 'ðŸ˜—', 'ðŸ˜™', 'ðŸ˜œ', 'ðŸ˜', 'ðŸ˜›', 'ðŸ˜³', 'ðŸ˜', 'ðŸ˜”', 'ðŸ˜Œ', 'ðŸ˜’', 'ðŸ˜ž', 'ðŸ˜£', 'ðŸ˜¢', 'ðŸ˜­', 'ðŸ˜ª', 'ðŸ˜¥', 'ðŸ˜°', 'ðŸ˜…', 'ðŸ˜“', 'ðŸ˜©', 'ðŸ˜«', 'ðŸ˜¨', 'ðŸ˜±', 'ðŸ˜ ', 'ðŸ˜¡', 'ðŸ˜¤', 'ðŸ˜–', 'ðŸ˜†', 'ðŸ˜‹', 'ðŸ˜·', 'ðŸ˜Ž', 'ðŸ˜´', 'ðŸ˜µ', 'ðŸ˜²', 'ðŸ˜Ÿ', 'ðŸ˜¦', 'ðŸ˜§', 'ðŸ˜ˆ', 'ðŸ‘¿', 'ðŸ˜®', 'ðŸ˜¬', 'ðŸ˜', 'ðŸ˜•', 'ðŸ˜¯', 'ðŸ˜¶', 'ðŸ˜‡', 'â˜ºï¸', 'ðŸ˜', 'ðŸ˜‘', 'ðŸ™ƒ', 'ðŸ™„', 'â˜¹ï¸', 'ðŸ¤', 'ðŸ¤‘', 'ðŸ¤’', 'ðŸ¤“', 'ðŸ¤”', 'ðŸ¤•', 'ðŸ™', 'ðŸ™‚', 'ðŸ¤—', 'ðŸ¤£', 'ðŸ¤ ', 'ðŸ¤¥', 'ðŸ¤¤', 'ðŸ¤¢', 'ðŸ¤§', 'ðŸ¤¡', 'ðŸ¤–', 'ðŸ–¤', 'ðŸ’›', 'ðŸ’™', 'ðŸ’œ', 'ðŸ’š', 'ðŸ§¡', 'â¤ï¸ï¸', 'ðŸ’”', 'ðŸ’—', 'ðŸ’“', 'ðŸ’•', 'ðŸ’–', 'ðŸ’ž', 'ðŸ’˜', 'ðŸ’', 'â£ï¸', 'ðŸ’Œ', 'ðŸ’‹', 'ðŸ˜º', 'ðŸ˜¸', 'ðŸ˜»', 'ðŸ˜½', 'ðŸ˜¼', 'ðŸ™€', 'ðŸ˜¿', 'ðŸ˜¹', 'ðŸ˜¾', 'ðŸ™ˆ', 'ðŸ™‰', 'ðŸ™Š', 'ðŸ’€', 'ðŸ‘½', 'ðŸ‘¹', 'ðŸ‘º', 'ðŸ¤©', 'ðŸ¤¨', 'ðŸ¥ºï¸', 'ðŸ¤¯', 'ðŸ¤ª', 'ðŸ¤¬', 'ðŸ¤®', 'ðŸ¤«', 'ðŸ¤­', 'ðŸ§', 'ðŸ¥°ï¸', 'ðŸ¥µï¸', 'ðŸ¥¶ï¸', 'ðŸ¥´ï¸', 'ðŸ¥³ï¸', 'ðŸ¥²', 'ðŸ¥¸'];

const foodIcons = ['â˜•ï¸', 'ðŸµ', 'ðŸ¶', 'ðŸº', 'ðŸ»', 'ðŸ¸', 'ðŸ¹', 'ðŸ·', 'ðŸ´', 'ðŸ•', 'ðŸ”', 'ðŸŸ', 'ðŸ—', 'ðŸ–', 'ðŸ', 'ðŸ›', 'ðŸ¤', 'ðŸ±', 'ðŸ£', 'ðŸ¥', 'ðŸ™', 'ðŸ˜', 'ðŸš', 'ðŸœ', 'ðŸ²', 'ðŸ¢', 'ðŸ¡', 'ðŸ³', 'ðŸž', 'ðŸ©', 'ðŸ®', 'ðŸ¦', 'ðŸ¨', 'ðŸ§', 'ðŸŽ‚', 'ðŸ°', 'ðŸª', 'ðŸ«', 'ðŸ¬', 'ðŸ­', 'ðŸ¯', 'ðŸŽ', 'ðŸ', 'ðŸŠ', 'ðŸ‹', 'ðŸ’', 'ðŸ‡', 'ðŸ‰', 'ðŸ“', 'ðŸ‘', 'ðŸˆ', 'ðŸŒ', 'ðŸ', 'ðŸ', 'ðŸ ', 'ðŸ†', 'ðŸ…', 'ðŸŒ½', 'ðŸŒ¶', 'ðŸŒ­', 'ðŸŒ®', 'ðŸŒ¯', 'ðŸ¾', 'ðŸ¿', 'ðŸ¥', 'ðŸ¥‘', 'ðŸ¥”', 'ðŸ¥•', 'ðŸ¥’', 'ðŸ¥œ', 'ðŸ¥', 'ðŸ¥–', 'ðŸ¥ž', 'ðŸ¥“', 'ðŸ¥™', 'ðŸ¥š', 'ðŸ¥˜', 'ðŸ¥—', 'ðŸ¥›', 'ðŸ¥¥', 'ðŸ¥¦', 'ðŸ¥¨', 'ðŸ¥©', 'ðŸ¥ª', 'ðŸ¥£', 'ðŸ¥«', 'ðŸ¥Ÿ', 'ðŸ¥ ', 'ðŸ¥¡', 'ðŸ¥§', 'ðŸ¥¤', 'ðŸ¥¢', 'ðŸ¥­ï¸', 'ðŸ¥¬ï¸', 'ðŸ¥¯ï¸', 'ðŸ§‚ï¸', 'ðŸ¥®ï¸', 'ðŸ¦žï¸', 'ðŸ§ï¸', 'ðŸ«•', 'ðŸ«’', 'ðŸ«“', 'ðŸ«”', 'ðŸ«‘', 'ðŸ«', 'ðŸ§‹'];

const animalIcons = ['ðŸ¶', 'ðŸº', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ¸', 'ðŸ¯', 'ðŸ¨', 'ðŸ»', 'ðŸ·', 'ðŸ½', 'ðŸ®', 'ðŸ—', 'ðŸµ', 'ðŸ’', 'ðŸ´', 'ðŸ‘', 'ðŸ˜', 'ðŸ¼', 'ðŸ§', 'ðŸ¦', 'ðŸ¤', 'ðŸ¥', 'ðŸ£', 'ðŸ”', 'ðŸ', 'ðŸ¢', 'ðŸ›', 'ðŸ', 'ðŸœ', 'ðŸ¿', 'ðŸž', 'ðŸŒ', 'ðŸ™', 'ðŸš', 'ðŸ ', 'ðŸŸ', 'ðŸ¬', 'ðŸ³', 'ðŸ‹', 'ðŸ„', 'ðŸ', 'ðŸ€', 'ðŸƒ', 'ðŸ…', 'ðŸ‡', 'ðŸ‰', 'ðŸŽ', 'ðŸ', 'ðŸ“', 'ðŸ•', 'ðŸ–', 'ðŸ', 'ðŸ‚', 'ðŸ²', 'ðŸ¡', 'ðŸŠ', 'ðŸ«', 'ðŸª', 'ðŸ†', 'ðŸˆ', 'ðŸ©', 'ðŸ¾', 'ðŸ¦€', 'ðŸ¦', 'ðŸ¦‚', 'ðŸ•·', 'ðŸ¦ƒ', 'ðŸ¦„', 'ðŸ¦', 'ðŸ¦‘', 'ðŸ¦‹', 'ðŸ¦', 'ðŸ¦Š', 'ðŸ¦Œ', 'ðŸ¦', 'ðŸ¦‡', 'ðŸ¦…', 'ðŸ¦†', 'ðŸ¦‰', 'ðŸ¦Ž', 'ðŸ¦ˆ', 'ðŸ¦“', 'ðŸ¦’', 'ðŸ¦”', 'ðŸ¦•', 'ðŸ¦–', 'ðŸ¦ï¸', 'ðŸ¦™ï¸', 'ðŸ¦›ï¸', 'ðŸ¦˜ï¸', 'ðŸ¦¡ï¸', 'ðŸ¦¢ï¸', 'ðŸ¦šï¸', 'ðŸ¦œï¸', 'ðŸ¦Ÿï¸', 'ðŸ»â€â„ï¸', 'ðŸ¦­', 'ðŸƒ', 'ðŸª±', 'ðŸ¦¬', 'ðŸª³', 'ðŸ¦£', 'ðŸ¦¤', 'ðŸˆâ€â¬›', 'ðŸ¦—', 'ðŸ¦«', 'ðŸª²', 'ðŸª°'];

const flagIcons = ['ðŸ‡¯ðŸ‡µ', 'ðŸ‡°ðŸ‡·', 'ðŸ‡©ðŸ‡ª', 'ðŸ‡¨ðŸ‡³', 'ðŸ‡ºðŸ‡¸', 'ðŸ‡«ðŸ‡·', 'ðŸ‡ªðŸ‡¸', 'ðŸ‡®ðŸ‡¹', 'ðŸ‡·ðŸ‡º', 'ðŸ‡¬ðŸ‡§', 'ðŸ‡¦ðŸ‡¿', 'ðŸ‡¦ðŸ‡º', 'ðŸ‡¦ðŸ‡¼', 'ðŸ‡¦ðŸ‡´', 'ðŸ‡¦ðŸ‡±', 'ðŸ‡¦ðŸ‡²', 'ðŸ‡¦ðŸ‡¸', 'ðŸ‡¦ðŸ‡¹', 'ðŸ‡¦ðŸ‡ª', 'ðŸ‡¦ðŸ‡¬', 'ðŸ‡¦ðŸ‡«', 'ðŸ‡¦ðŸ‡®', 'ðŸ‡¦ðŸ‡©', 'ðŸ‡¦ðŸ‡·', 'ðŸ‡§ðŸ‡´', 'ðŸ‡§ðŸ‡·', 'ðŸ‡§ðŸ‡³', 'ðŸ‡§ðŸ‡²', 'ðŸ‡§ðŸ‡¹', 'ðŸ‡§ðŸ‡¸', 'ðŸ‡§ðŸ‡¾', 'ðŸ‡§ðŸ‡¿', 'ðŸ‡§ðŸ‡¼', 'ðŸ‡§ðŸ‡ª', 'ðŸ‡§ðŸ‡«', 'ðŸ‡§ðŸ‡¬', 'ðŸ‡§ðŸ‡­', 'ðŸ‡§ðŸ‡®', 'ðŸ‡§ðŸ‡¯', 'ðŸ‡§ðŸ‡¦', 'ðŸ‡§ðŸ‡§', 'ðŸ‡§ðŸ‡©', 'ðŸ‡¨ðŸ‡»', 'ðŸ‡¨ðŸ‡¼', 'ðŸ‡¨ðŸ‡º', 'ðŸ‡¨ðŸ‡¿', 'ðŸ‡¨ðŸ‡¾', 'ðŸ‡¨ðŸ‡²', 'ðŸ‡¨ðŸ‡°', 'ðŸ‡¨ðŸ‡±', 'ðŸ‡¨ðŸ‡·', 'ðŸ‡¨ðŸ‡´', 'ðŸ‡¨ðŸ‡©', 'ðŸ‡¨ðŸ‡¦', 'ðŸ‡¨ðŸ‡¬', 'ðŸ‡¨ðŸ‡«', 'ðŸ‡¨ðŸ‡®', 'ðŸ‡¨ðŸ‡­', 'ðŸ‡©ðŸ‡¯', 'ðŸ‡©ðŸ‡²', 'ðŸ‡©ðŸ‡°', 'ðŸ‡©ðŸ‡´', 'ðŸ‡©ðŸ‡¿', 'ðŸ‡ªðŸ‡¹', 'ðŸ‡ªðŸ‡·', 'ðŸ‡ªðŸ‡¬', 'ðŸ‡ªðŸ‡ª', 'ðŸ‡ªðŸ‡¨', 'ðŸ‡«ðŸ‡´', 'ðŸ‡«ðŸ‡®', 'ðŸ‡«ðŸ‡¯', 'ðŸ‡¬ðŸ‡¹', 'ðŸ‡¬ðŸ‡³', 'ðŸ‡¬ðŸ‡²', 'ðŸ‡¬ðŸ‡µ', 'ðŸ‡¬ðŸ‡·', 'ðŸ‡¬ðŸ‡¶', 'ðŸ‡¬ðŸ‡º', 'ðŸ‡¬ðŸ‡¼', 'ðŸ‡¬ðŸ‡¾', 'ðŸ‡¬ðŸ‡«', 'ðŸ‡¬ðŸ‡­', 'ðŸ‡¬ðŸ‡®', 'ðŸ‡¬ðŸ‡ª', 'ðŸ‡¬ðŸ‡©', 'ðŸ‡¬ðŸ‡¦', 'ðŸ‡­ðŸ‡º', 'ðŸ‡­ðŸ‡·', 'ðŸ‡­ðŸ‡³', 'ðŸ‡­ðŸ‡°', 'ðŸ‡­ðŸ‡¹', 'ðŸ‡®ðŸ‡ª', 'ðŸ‡®ðŸ‡©', 'ðŸ‡®ðŸ‡·', 'ðŸ‡®ðŸ‡¶', 'ðŸ‡®ðŸ‡³', 'ðŸ‡®ðŸ‡±', 'ðŸ‡®ðŸ‡¸', 'ðŸ‡¯ðŸ‡´', 'ðŸ‡¯ðŸ‡²', 'ðŸ‡°ðŸ‡¬', 'ðŸ‡°ðŸ‡ª', 'ðŸ‡°ðŸ‡­', 'ðŸ‡°ðŸ‡®', 'ðŸ‡°ðŸ‡¼', 'ðŸ‡°ðŸ‡¿', 'ðŸ‡°ðŸ‡¾', 'ðŸ‡°ðŸ‡³', 'ðŸ‡°ðŸ‡²', 'ðŸ‡°ðŸ‡µ', 'ðŸ‡±ðŸ‡°', 'ðŸ‡±ðŸ‡·', 'ðŸ‡±ðŸ‡¸', 'ðŸ‡±ðŸ‡¹', 'ðŸ‡±ðŸ‡»', 'ðŸ‡±ðŸ‡º', 'ðŸ‡±ðŸ‡¾', 'ðŸ‡±ðŸ‡®', 'ðŸ‡±ðŸ‡¨', 'ðŸ‡±ðŸ‡§', 'ðŸ‡±ðŸ‡¦', 'ðŸ‡²ðŸ‡¼', 'ðŸ‡²ðŸ‡»', 'ðŸ‡²ðŸ‡´', 'ðŸ‡²ðŸ‡ª', 'ðŸ‡²ðŸ‡¬', 'ðŸ‡²ðŸ‡©', 'ðŸ‡²ðŸ‡¦', 'ðŸ‡²ðŸ‡³', 'ðŸ‡²ðŸ‡²', 'ðŸ‡²ðŸ‡·', 'ðŸ‡²ðŸ‡¶', 'ðŸ‡²ðŸ‡¹', 'ðŸ‡²ðŸ‡¸', 'ðŸ‡²ðŸ‡¾', 'ðŸ‡²ðŸ‡½', 'ðŸ‡²ðŸ‡¿', 'ðŸ‡²ðŸ‡±', 'ðŸ‡²ðŸ‡°', 'ðŸ‡²ðŸ‡µ', 'ðŸ‡³ðŸ‡®', 'ðŸ‡³ðŸ‡¦', 'ðŸ‡³ðŸ‡±', 'ðŸ‡³ðŸ‡´', 'ðŸ‡³ðŸ‡µ', 'ðŸ‡³ðŸ‡¿', 'ðŸ‡³ðŸ‡º', 'ðŸ‡³ðŸ‡ª', 'ðŸ‡³ðŸ‡¨', 'ðŸ‡³ðŸ‡¬', 'ðŸ‡´ðŸ‡²', 'ðŸ‡µðŸ‡¸', 'ðŸ‡µðŸ‡°', 'ðŸ‡µðŸ‡¾', 'ðŸ‡µðŸ‡¼', 'ðŸ‡µðŸ‡­', 'ðŸ‡µðŸ‡¬', 'ðŸ‡µðŸ‡ª', 'ðŸ‡µðŸ‡¦', 'ðŸ‡µðŸ‡·', 'ðŸ‡µðŸ‡¹', 'ðŸ‡µðŸ‡±', 'ðŸ‡¶ðŸ‡¦', 'ðŸ‡·ðŸ‡ª', 'ðŸ‡·ðŸ‡¸', 'ðŸ‡·ðŸ‡´', 'ðŸ‡·ðŸ‡¼', 'ðŸ‡¸ðŸ‡²', 'ðŸ‡¸ðŸ‡¦', 'ðŸ‡¸ðŸ‡§', 'ðŸ‡¸ðŸ‡¨', 'ðŸ‡¸ðŸ‡©', 'ðŸ‡¸ðŸ‡¬', 'ðŸ‡¸ðŸ‡ª', 'ðŸ‡¸ðŸ‡®', 'ðŸ‡¸ðŸ‡»', 'ðŸ‡¸ðŸ‡¿', 'ðŸ‡¸ðŸ‡¾', 'ðŸ‡¸ðŸ‡½', 'ðŸ‡¸ðŸ‡¹', 'ðŸ‡¸ðŸ‡¸', 'ðŸ‡¸ðŸ‡³', 'ðŸ‡¸ðŸ‡±', 'ðŸ‡¸ðŸ‡°', 'ðŸ‡¸ðŸ‡·', 'ðŸ‡¸ðŸ‡´', 'ðŸ‡¹ðŸ‡´', 'ðŸ‡¹ðŸ‡¿', 'ðŸ‡¹ðŸ‡¹', 'ðŸ‡¹ðŸ‡²', 'ðŸ‡¹ðŸ‡³', 'ðŸ‡¹ðŸ‡±', 'ðŸ‡¹ðŸ‡·', 'ðŸ‡¹ðŸ‡»', 'ðŸ‡¹ðŸ‡¬', 'ðŸ‡¹ðŸ‡«', 'ðŸ‡¹ðŸ‡¯', 'ðŸ‡¹ðŸ‡­', 'ðŸ‡¹ðŸ‡¨', 'ðŸ‡ºðŸ‡¿', 'ðŸ‡ºðŸ‡¾', 'ðŸ‡ºðŸ‡¬', 'ðŸ‡ºðŸ‡¦', 'ðŸ‡»ðŸ‡º', 'ðŸ‡»ðŸ‡³', 'ðŸ‡»ðŸ‡¨', 'ðŸ‡»ðŸ‡ª', 'ðŸ‡»ðŸ‡¬', 'ðŸ‡»ðŸ‡®', 'ðŸ‡¼ðŸ‡¸', 'ðŸ‡¾ðŸ‡ª', 'ðŸ‡¿ðŸ‡¦', 'ðŸ‡¿ðŸ‡¼', 'ðŸ‡¿ðŸ‡²', 'ðŸ‡¦ðŸ‡¶', 'ðŸ‡¦ðŸ‡½', 'ðŸ‡§ðŸ‡±', 'ðŸ‡§ðŸ‡¶', 'ðŸ‡¨ðŸ‡¨', 'ðŸ‡¨ðŸ‡½', 'ðŸ‡ªðŸ‡­', 'ðŸ‡ªðŸ‡º', 'ðŸ‡«ðŸ‡°', 'ðŸ‡«ðŸ‡²', 'ðŸ‡¬ðŸ‡¬', 'ðŸ‡¬ðŸ‡±', 'ðŸ‡¬ðŸ‡¸', 'ðŸ‡®ðŸ‡¨', 'ðŸ‡®ðŸ‡²', 'ðŸ‡®ðŸ‡´', 'ðŸ‡¯ðŸ‡ª', 'ðŸ‡²ðŸ‡¨', 'ðŸ‡²ðŸ‡­', 'ðŸ‡²ðŸ‡º', 'ðŸ‡³ðŸ‡«', 'ðŸ‡³ðŸ‡·', 'ðŸ‡µðŸ‡«', 'ðŸ‡µðŸ‡²', 'ðŸ‡µðŸ‡³', 'ðŸ‡¸ðŸ‡­', 'ðŸ‡¹ðŸ‡©', 'ðŸ‡¹ðŸ‡°', 'ðŸ‡¹ðŸ‡¼', 'ðŸ‡»ðŸ‡¦', 'ðŸ‡¼ðŸ‡«', 'ðŸ‡½ðŸ‡°', 'ðŸ‡¾ðŸ‡¹', 'ðŸ‡¦ðŸ‡¨', 'ðŸ‡§ðŸ‡»', 'ðŸ‡ªðŸ‡¦', 'ðŸ‡¨ðŸ‡µ', 'ðŸ‡©ðŸ‡¬', 'ðŸ‡­ðŸ‡²', 'ðŸ‡²ðŸ‡«', 'ðŸ‡¸ðŸ‡¯', 'ðŸ‡¹ðŸ‡¦', 'ðŸ‡ºðŸ‡²', 'ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿', 'ðŸ´ó §ó ¢ó ³ó £ó ´ó ¿', 'ðŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿', 'ðŸ‡ºðŸ‡³', 'ðŸš©', 'ðŸ³', 'ðŸ´', 'ðŸ³ï¸â€ðŸŒˆ', 'ðŸ´â€â˜ ï¸ï¸', 'ðŸ³ï¸â€âš§ï¸'];

app.get('/', (req, res) => {
    console.log(req);
    res.send(data);
});

app.get('/cards/:difficulty/:theme', (req, res) => {

    let data = { cards: [] };

    if (req.params !== null) {
        if (req.params.difficulty !== null && req.params.theme !== null) {
            let difficulty = req.params.difficulty;
            let theme = req.params.theme;

            let cards = getCards(difficulty, theme);

            cards.forEach(card => {
                data.cards.push(card);
            });

            cards.forEach(card => {
                data.cards.push(card);
            });

            shuffle(data.cards);
        }
    }

    res.send(JSON.stringify(data));
});

app.listen(port, () => {
    console.log(`Example app listening on port ${port}`);
});

function getCards(difficulty, theme) {

    let cards = [];
    let iconList = null;

    switch (theme) {
        case THEME_FOOD:
            iconList = foodIcons;
            break;
        case THEME_FACES:
            iconList = faceIcons;
            break;
        case THEME_ANIMALS:
            iconList = animalIcons;
            break;
        case THEME_FLAGS:
            iconList = flagIcons;
            break;
        default:
            break;
    }

    for (let i = 1; i <= difficulty; i++) {

        var iconIndex = getIconIndex(-1, cards, iconList.length);
        var card = { id: iconIndex, icon: iconList[iconIndex] };
        cards.push(card);
    }

    return cards;
}

function getIconIndex(iconIndex, cards, length) {
    //TODO: Add logic to get unique icons.
    let newIconIndex = getRandomBetween(0, (length - 1));

    if (iconIndex === newIconIndex) {
        return getIconIndex(iconIndex, cards, length);
    }

    for (let i = 0; i < cards.length; i++) {
        const card = cards[i];
        if (card.id === newIconIndex) {
            return getIconIndex(-1, cards, length);
        }
    }

    return newIconIndex;
}

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function getRandomBetween(min, max) {
    return Math.floor(Math.random() * (max - min) + min);
}
